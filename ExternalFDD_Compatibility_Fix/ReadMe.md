# External FDD Compatibility Fix

内蔵FDD以外から起動できないゲームのためのツールです。

きゃんきゃんバニースペリオール用ですが、
もしかしたら
他のゲームにも有効かもしれません。（未確認）

## 使用方法

1. extFdd_fix.dskを起動
2. "INSERT DISK AND HIT ANY KEY"  
   と表示されたらゲームのディスクを入れて  
   SPACEキーやRETURNキーなどを押下

- きゃんきゃんバニースペリオールなど  
  CTRLキーを押しながら起動する必要のあるものは  
  "INSERT DISK AND HIT ANY KEY"がでるまで  
  電源投入時からCTRLキーを押し続ける

## 原因

ブートセクタのC01EHが呼び出される時、
DEレジスタには

**「ページ1がRAMに切り替わる」ルーチンのアドレス(F36BH)**

 が入っているとされますが、多くの 外付けFDDでは機能しないようです。


このルーチンを使用してページ1がRAMになることを期待した
ソフトが外付けFDDではうまく動作しない問題へ力技で対処するものです。

## 処理概要

1. ページ1をRAMに明示的に変更
2. メッセージを出してキー入力待ち
3. ゲームのブートセクタ読み込み
4. ゲーム側の処理へジャンプ

※
画面モード変更、文字表示、キー入力待ちがインタースロットコール
になっているのは、CY=1(各種必須初期化が終わった状態)でC01EHが
呼ばれる時には、ページ0がRAMになっているからですが、
かなり手抜きな呼び方になっています。

## 動作条件

PHYDIOを呼ぶのでDOS1専用です。
