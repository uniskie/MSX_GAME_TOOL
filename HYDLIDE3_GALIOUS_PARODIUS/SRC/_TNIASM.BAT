@ECHO OFF

SET ASM=TNIASM
SET ERRCHK=0

IF /I "%2"=="/P" GOTO SETCHECK
IF /I NOT "%1"=="/P" GOTO ASM

:SHIFT
	SHIFT /1
:SETCHECK
	SET ERCHK=1

:ASM
ECHO %ASM% "%1"
%ASM% "%1"
IF ERRORLEVEL 1 GOTO ERR

:REN
IF EXIST "%~n1.SYM" DEL "%~n1.SYM"
ECHO REN %ASM%.SYM "%~n1.SYM"
REN %ASM%.SYM "%~n1.SYM"
EXIT /B

:ERR
ECHO.
IF NOT "%ERCHK%"=="1" GOTO ERREND
PAUSE

:ERREND
EXIT /B %ERRORLEVEL%
